<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Problem 3b — Figure 3-3 EER (with Discriminator)</title>
  <style>
    body{font-family:Inter,Arial,Helvetica,sans-serif;background:#f6f8fa;padding:20px;color:#0f1724}
    .card{background:white;border-radius:12px;padding:18px;max-width:980px;margin:auto;box-shadow:0 6px 18px rgba(15,23,36,0.06)}
    h1{font-size:18px;margin:0 0 8px}
    p.note{margin:0 0 12px;color:#334155}
    svg{width:100%;height:520px}
    .entity{fill:#ffffff;stroke:#0f1724;stroke-width:1.4;rx:6}
    .etype{fill:#f8fafc;stroke:#0f1724;stroke-width:1;rx:6}
    .label{font-weight:700;font-size:13px}
    .att{font-size:12px}
    .disc{font-size:11px;font-weight:700;fill:#0f1724}
    .edge{stroke:#0f1724;stroke-width:1.2;fill:none}
  </style>
</head>
<body>
  <div class="card">
    <h1>Problem 3b — Figure 3-3 (Patient supertype with discriminator)</h1>
    <p class="note">This reproduces Figure 3-3 from the textbook and adds a <b>subtype discriminator</b> attribute to PATIENT: <i>PatientType</i> with values {Outpatient, Resident}. The specialization is shown as <b>disjoint, partial</b> (a patient may be either outpatient or resident; not both, but some patient records may be neither in this conceptual model).</p>

    <svg viewBox="0 0 980 520" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Figure 3-3 EER with discriminator">
      <!-- PATIENT supertype box -->
      <rect x="360" y="28" width="260" height="96" class="entity" />
      <text x="490" y="54" text-anchor="middle" class="label">PATIENT</text>
      <text x="490" y="74" text-anchor="middle" class="att">(PatientID PK, PatientName, AdmitDate)</text>
      <text x="490" y="92" text-anchor="middle" class="att">PatientType (discriminator) = {Outpatient, Resident}</text>

      <!-- specialization circle -->
      <circle cx="490" cy="160" r="12" fill="#ffffff" stroke="#0f1724" stroke-width="1.2" />

      <!-- OUTPATIENT box -->
      <rect x="120" y="208" width="220" height="64" class="etype" />
      <text x="230" y="238" text-anchor="middle" class="label">OUTPATIENT</text>
      <text x="230" y="256" text-anchor="middle" class="att">(VisitDate, Clinic, ResponsiblePhysicianID)</text>

      <!-- RESIDENT box -->
      <rect x="640" y="208" width="220" height="86" class="etype" />
      <text x="750" y="238" text-anchor="middle" class="label">RESIDENT</text>
      <text x="750" y="256" text-anchor="middle" class="att">(BedAssigned, DateDischarged)</text>
      <text x="750" y="276" text-anchor="middle" class="att">(ResponsiblePhysicianID)</text>

      <!-- BED entity -->
      <rect x="380" y="340" width="200" height="60" class="entity" />
      <text x="480" y="370" text-anchor="middle" class="label">BED</text>
      <text x="480" y="388" text-anchor="middle" class="att">(BedID PK, Ward, BedType)</text>

      <!-- PHYSICIAN entity -->
      <rect x="120" y="340" width="200" height="60" class="entity" />
      <text x="220" y="370" text-anchor="middle" class="label">PHYSICIAN</text>
      <text x="220" y="388" text-anchor="middle" class="att">(PhysicianID PK, Name, Specialty)</text>

      <!-- connector lines -->
      <line x1="490" y1="124" x2="490" y2="148" class="edge" />
      <line x1="490" y1="172" x2="230" y2="208" class="edge" />
      <line x1="490" y1="172" x2="750" y2="208" class="edge" />

      <!-- edges from RESIDENT to BED and PHYSICIAN -->
      <line x1="750" y1="294" x2="480" y2="340" class="edge" />
      <line x1="750" y1="294" x2="220" y2="340" class="edge" />

      <!-- discriminator labels on edges -->
      <text x="330" y="168" class="disc">PatientType = Outpatient</text>
      <text x="650" y="168" class="disc">PatientType = Resident</text>

      <!-- relationship labels -->
      <text x="620" y="330" class="att">Is Assigned (Resident — Bed)</text>
      <text x="420" y="330" class="att">Is Cared For (Resident/Outpatient — Physician)</text>

      <!-- legend -->
      <rect x="24" y="380" width="320" height="110" rx="8" fill="#f8fafc" stroke="#e6eef2" />
      <text x="44" y="408" class="label">Notes</text>
      <text x="44" y="428" class="att">• Discriminator attribute added to PATIENT</text>
      <text x="44" y="448" class="att">• Specialization is disjoint (cannot be both Outpatient and Resident)</text>
      <text x="44" y="468" class="att">• Partial specialization (some patients may be neither in conceptual model)</text>

    </svg>

    <p style="margin-top:12px;color:#334155">Assumptions: Figure 3-3 in the textbook shows a disjoint specialization. I used <b>PatientType</b> as the discriminator. If you want it to be total (every patient must be outpatient or resident), I can update the diagram to show total specialization (double line).</p>
  </div>
</body>
</html>