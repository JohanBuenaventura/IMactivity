<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Problem 9 — Bank Account EER (Checking, Savings, Loan)</title>
<style>
  body{font-family:Inter,Arial,Helvetica,sans-serif;background:#f6f8fa;padding:20px;color:#0f1724}
  .card{background:white;border-radius:12px;padding:18px;max-width:980px;margin:auto;box-shadow:0 6px 24px rgba(15,23,36,0.06)}
  h1{font-size:18px;margin:0 0 8px}
  p.note{margin:0 0 12px;color:#334155}
  svg{width:100%;height:420px}
  .entity{fill:#ffffff;stroke:#0f1724;stroke-width:1.4;rx:6}
  .etype{fill:#f8fafc;stroke:#0f1724;stroke-width:1;rx:6}
  .label{font-weight:700;font-size:13px}
  .att{font-size:12px}
  .disc{font-size:11px;font-weight:700;fill:#0f1724}
  .edge{stroke:#0f1724;stroke-width:1.2;fill:none}
  pre{background:#0f1724;color:#f8fafc;padding:12px;border-radius:8px;overflow:auto}
</style>
</head>
<body>
  <div class="card">
    <h1>Problem 9 — Bank Accounts EER</h1>
    <p class="note">Model the ACCOUNT supertype with subtypes CHECKING, SAVINGS, and LOAN. Each account must be exactly one subtype (disjoint & total). Subtype discriminator: <b>AccountType</b>. Includes relationship OWNED_BY to CUSTOMER.</p>

    <svg viewBox="0 0 980 420" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Problem 9 EER">
      <!-- ACCOUNT supertype -->
      <rect x="340" y="20" width="300" height="110" class="entity" />
      <text x="490" y="50" text-anchor="middle" class="label">ACCOUNT</text>
      <text x="490" y="74" text-anchor="middle" class="att">(AccountNo PK, DateOpened, Balance)</text>
      <text x="490" y="94" text-anchor="middle" class="att">AccountType (discriminator) = {Checking, Savings, Loan}</text>

      <!-- specialization circle -->
      <circle cx="490" cy="150" r="12" fill="#ffffff" stroke="#0f1724" stroke-width="1.2" />

      <!-- CHECKING subtype -->
      <rect x="60" y="190" width="240" height="80" class="etype" />
      <text x="180" y="220" class="label">CHECKING</text>
      <text x="180" y="240" class="att">(AccountNo PK/FK, ServiceCharge)</text>

      <!-- SAVINGS subtype -->
      <rect x="370" y="190" width="240" height="80" class="etype" />
      <text x="490" y="220" class="label">SAVINGS</text>
      <text x="490" y="240" class="att">(AccountNo PK/FK, InterestRate)</text>

      <!-- LOAN subtype -->
      <rect x="680" y="190" width="240" height="80" class="etype" />
      <text x="800" y="220" class="label">LOAN</text>
      <text x="800" y="240" class="att">(AccountNo PK/FK, InterestRate, PaymentAmount)</text>

      <!-- connectors -->
      <line x1="490" y1="130" x2="490" y2="148" class="edge" />
      <line x1="490" y1="162" x2="180" y2="190" class="edge" />
      <line x1="490" y1="162" x2="490" y2="190" class="edge" />
      <line x1="490" y1="162" x2="800" y2="190" class="edge" />

      <!-- discriminator labels -->
      <text x="300" y="160" class="disc">AccountType = Checking</text>
      <text x="490" y="160" class="disc">AccountType = Savings</text>
      <text x="680" y="160" class="disc">AccountType = Loan</text>

      <!-- CUSTOMER entity and RENTS/OWNS relationship -->
      <rect x="40" y="320" width="200" height="70" class="entity" />
      <text x="140" y="348" class="label">CUSTOMER</text>
      <text x="140" y="368" class="att">(CustomerID PK, Name, Address)</text>

      <line x1="140" y1="320" x2="490" y2="200" stroke="#0f1724" stroke-width="1.2" />
      <text x="320" y="270" class="att">OWNS (1..* Customer — Account 0..*)</text>

    </svg>

    <h2 style="margin:14px 0 6px">Entity Definitions</h2>
    <ul class="att">
      <li><b>ACCOUNT</b> — <i>AccountNo</i> (PK), DateOpened, Balance, AccountType discriminator.</li>
      <li><b>CHECKING</b> — serviceCharge attribute; PK = AccountNo (FK to ACCOUNT).</li>
      <li><b>SAVINGS</b> — interestRate attribute; PK = AccountNo (FK to ACCOUNT).</li>
      <li><b>LOAN</b> — interestRate, paymentAmount; PK = AccountNo (FK to ACCOUNT).</li>
      <li><b>CUSTOMER</b> — holds personal info; relationship OWNS (Customer 1..* — Account 0..*).</li>
    </ul>

    <h2 style="margin:14px 0 6px">Relational Mapping (Sample DDL)</h2>
    <pre>CREATE TABLE Customer (
  CustomerID INT PRIMARY KEY,
  Name VARCHAR(100),
  Address VARCHAR(150)
);

CREATE TABLE Account (
  AccountNo BIGINT PRIMARY KEY,
  DateOpened DATE,
  Balance DECIMAL(15,2),
  AccountType VARCHAR(20)  -- discriminator
);

CREATE TABLE Checking (
  AccountNo BIGINT PRIMARY KEY,
  ServiceCharge DECIMAL(9,2),
  FOREIGN KEY (AccountNo) REFERENCES Account(AccountNo)
);

CREATE TABLE Savings (
  AccountNo BIGINT PRIMARY KEY,
  InterestRate DECIMAL(5,4),
  FOREIGN KEY (AccountNo) REFERENCES Account(AccountNo)
);

CREATE TABLE Loan (
  AccountNo BIGINT PRIMARY KEY,
  InterestRate DECIMAL(5,4),
  PaymentAmount DECIMAL(12,2),
  FOREIGN KEY (AccountNo) REFERENCES Account(AccountNo)
);

CREATE TABLE CustomerAccount (
  CustomerID INT,
  AccountNo BIGINT,
  PRIMARY KEY (CustomerID, AccountNo),
  FOREIGN KEY (CustomerID) REFERENCES Customer(CustomerID),
  FOREIGN KEY (AccountNo) REFERENCES Account(AccountNo)
);
</pre>

    <p style="margin-top:12px;color:#334155">Notes: Specialization is <b>disjoint</b> and <b>total</b> — every account must be exactly one subtype (checking, savings, or loan). The sample mapping uses a junction table CustomerAccount for the many-to-many ownership if customers can co-own accounts; adjust cardinalities as needed.</p>
  </div>
</body>
</html>